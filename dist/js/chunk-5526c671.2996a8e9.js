(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5526c671"],{"0ce4":function(t,s,a){"use strict";var e=a("4e6e"),n=a.n(e);n.a},"4e6e":function(t,s,a){},b789:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("van-row",{staticClass:"cart",attrs:{type:"flex"}},[a("van-col",{staticClass:"shopList",attrs:{span:"24"}},[a("van-row",{staticClass:"title",attrs:{type:"flex"}},[a("van-col",{attrs:{span:"22"}},[t._v("购物清单")]),a("van-col",{attrs:{span:"2",offset:"12"}},[a("van-icon",{attrs:{name:"delete"}})],1)],1),a("van-row",{staticClass:"content",attrs:{type:"flex"}},[a("van-col",{staticClass:"body",attrs:{span:"24"}},[t._l(t.items,function(s,e){return a("van-card",{key:e,staticClass:"item",attrs:{desc:s.pdesc,title:s.pname,thumb:s.pimg}},[a("van-row",{staticClass:"itemInfo",attrs:{slot:"tags",type:"flex"},slot:"tags"},[a("van-col",{staticClass:"priceBox",attrs:{span:"12"}},[a("p",[t._v("\n                单价:\n                "),a("span",{staticClass:"price"},[t._v("￥"+t._s(s.pprice))])]),a("p",[t._v("\n                小计:\n                "),a("span",{staticClass:"price"},[t._v("￥"+t._s(s.num*s.pprice))])])]),a("van-col",{attrs:{span:"12"}},[a("van-row",{staticClass:"numBox"},[a("van-stepper",{attrs:{plus:"item.num++",minus:"item.num--"},on:{change:t.update},model:{value:s.num,callback:function(a){t.$set(s,"num",a)},expression:"item.num"}})],1)],1)],1),a("van-row",{attrs:{slot:"footer",type:"flex"},slot:"footer"},[a("van-col",{attrs:{span:"17",offset:"6"}},[a("van-button",{staticClass:"deleteBtn",attrs:{color:"#999999",size:"small"},on:{click:function(a){return t.remove(e,s.pid,s)}}},[t._v("删除")])],1)],1)],1)}),a("van-row",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}]},[a("p",{staticClass:"empyt"},[t._v("购物车内暂时没有商品，赶紧去选购吧！")]),a("van-button",{staticClass:"empytBtn",attrs:{color:"#ca151d",size:"mini",to:"/home"}},[t._v("去逛逛")])],1)],2)],1),a("van-row",{staticClass:"fiexdPrice",attrs:{type:"flex"}},[a("van-col",{staticClass:"leftInfo",attrs:{span:"12"}},[a("p",[t._v("\n          商品总重量:\n          "),a("span",{staticClass:"price"},[t._v("￥")])]),a("p",[t._v("\n          商品优惠:\n          "),a("span",{staticClass:"price"},[t._v("￥")])]),a("p",[t._v("\n          促销活动优惠:\n          "),a("span",{staticClass:"price"},[t._v("￥")])]),a("p",[t._v("\n          商品总金额:\n          "),a("span",{staticClass:"price"},[t._v("￥"+t._s(t.getTotal))])]),a("p",[t._v("\n          金额总计:\n          "),a("span",{staticClass:"price"},[t._v("￥"+t._s(t.getTotal))])])]),a("van-col",{attrs:{span:"12"}},[a("van-row",{staticClass:"rightBtn",attrs:{type:"flex",justify:"space-around"}},[a("van-col",{attrs:{span:"10"}},[a("van-button",{staticClass:"goShopBtn p-btn",attrs:{color:"#ca151d",url:"/index"}},[t._v("继续购物")])],1),a("van-col",{attrs:{span:"10"}},[a("van-button",{staticClass:"endBtn p-btn",attrs:{color:"#ca151d"},on:{click:t.tocheckout}},[t._v("去结算")])],1)],1)],1)],1)],1)],1)},n=[],c=(a("ac6a"),a("c24f")),o=JSON.parse(localStorage.getItem("carts")||"[]");console.log(o);var r={name:"cart",data:function(){return{items:"",flag:""}},mounted:function(){var t=this,s={uid:this.$store.state.username};c["a"].postCart(s).then(function(s){t.items=s.data[0].items,localStorage.setItem("carts",JSON.stringify(t.items)),console.log(s.data[0].items.length),s.data[0].items.length?t.flag=0:t.flag=1})},created:function(){},computed:{getTotal:function(){if(this.items){var t=0;return this.items.forEach(function(s){return t+=s.pprice*s.num}),t}return 0}},methods:{tocheckout:function(){this.$store.state.token?this.$router.push("/payment?pid="+this.$store.state.username):this.$router.push("/login")},remove:function(t,s,a){var e=this,n={username:this.$store.state.username,pid:s,num:a.num,pname:a.pname,pimg:a.pimg,pdesc:a.pdesc,pprice:a.pprice};c["a"].postDelCart(n).then(function(s){e.items.splice(t,1);var a=JSON.parse(localStorage.getItem("carts"));console.log(a),a.splice(t,1),localStorage.setItem("carts",JSON.stringify(a)),e.items.length?e.flag=0:e.flag=1})},update:function(){localStorage.setItem("carts",JSON.stringify(this.items))}}},i=r,l=(a("0ce4"),a("2877")),p=Object(l["a"])(i,e,n,!1,null,"0f05c001",null);s["default"]=p.exports}}]);
//# sourceMappingURL=chunk-5526c671.2996a8e9.js.map